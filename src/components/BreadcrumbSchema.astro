---
/**
 * JSON-LD BreadcrumbList para SEO. Incluir en páginas que usen Breadcrumb.
 * currentPageUrl: URL canónica de la página actual (último ítem sin href).
 */
type BreadcrumbItem = { label: string; href?: string };
const { items, currentPageUrl } = Astro.props as {
  items: BreadcrumbItem[];
  currentPageUrl: string;
};
const list = items.map((item, i) => ({
  "@type": "ListItem",
  position: i + 1,
  name: item.label,
  ...(item.href ? { item: new URL(item.href, currentPageUrl).href } : { item: currentPageUrl }),
}));
const schema = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  itemListElement: list,
};
---

<script type="application/ld+json" set:html={JSON.stringify(schema)} />
